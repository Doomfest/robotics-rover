#!/usr/bin/env python2.7

import roboticsnet
from roboticsnet.rover_listener import RoverListener
from roboticsnet.command_hook import CommandHook

import roboticsrov
from roboticsrov.stream_manager import start_video, stop_video 
from roboticsrov.umanager import UManager 

uManager = UManager()

cmdHook = CommandHook(
    forward=uManager.forward,
    reverse=uManager.reverse,  
    forwardLeft=uManager.forwardLeft,
    forwardRight=uManager.forwardRight,
    reverseLeft=uManager.reverseLeft,
    reverseRight=uManager.reverseRight,
    stop=uManager.stop,
    startVideo=start_video,
    stopVideo=stop_video)

server = RoverListener(hooks=cmdHook)

print roboticsrov.__appname__, " ", roboticsrov.__version__
print "Starting command dispatcher..."
server.listen()
