#!/usr/bin/env python2.7

import roboticsnet
import roboticsrov
import roboticslogger
import threading
from roboticsnet.rover_listener import RoverListener
from roboticsnet.udp_listener import UdpListener
from roboticsrov.commands import Commands
from roboticslogger.logger import Logger
from multiprocessing import Process, Pipe


logger = Logger()
parent_conn, child_conn = Pipe()
p = Process(target=logger.run, args=(child_conn,))
p.start()

commands = Commands()
server = RoverListener(hook=commands)
server2 = UdpListener(hook=commands)
#need to put udplistener here


print "Starting command dispatcher..."
parent_conn.send(["info", "starting server"])
server.start()
#print "hi"
server2.start()
